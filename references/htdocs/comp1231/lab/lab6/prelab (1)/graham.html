<!DOCTYPE html>
<!--
	fuckfuckfuck
-->
<html>
<head>
	<meta charset="utf-8">
	<title>Fuck Fuck Fuck</title>
	
	<style type="text/css">
	<!-- Why is this commented out? -->

	<!--
		* {
			outline:none;
		}
		
		body {
			color:#555;
			font-family:Helvetica, Arial, Sans-Serif;
			padding:20pt;
			margin:0;
			font-size:100%;
			text-align:center;
		}
		
		.Wrapper {
			max-width:640px;
			text-align:left;
			margin:0 auto;
		}
		
		h1 {
			padding:0;
			margin:0 0 20pt;
		}
		
		hr {
			margin:20pt 0;
		}
		
		fieldset {
			position:relative;
			border:none;
			padding:0;
			margin:20pt 0;
		}
		
		fieldset:after {
			content:".";
			clear:both;
			display:block;
			height:0;
			visibility:hidden;
		}
		
		fieldset label {
			display:block;
			float:left;
			width:25%;
			margin-right:20pt;
			padding-top:10pt;
			text-align:right;
		}
		
		input[type=text],
		input[type=password],
		select {
			display:block;
			border:2px solid #ccc;
			background-color:#f5f5f5;
			padding:7pt 7pt 5pt;
			
			font-family:Helvetica, Arial, Sans-Serif;
			font-size:13pt;
			color:#777;
			
			transition:border 250ms ease-out 0, background-color 250ms ease-out 0, color 250ms ease-out 0;
		}
		
		select {
			height:2.125em;
		}
		
		input[type=text]:focus,
		input[type=password]:focus {
			border:2px solid cornflowerblue;
			background-color:#fff;
			color:#555;
		}
		
		input.OK {
			border:2px solid lightgreen;
		}
		
		input.BAD {
			border:2px solid orange;
		}
		
		input[type=submit] {
			float:right;
			background-color:navy;
			border:none;
			color:#fff;
			font-family:Helvetica, Arial, Sans-Serif;
			font-size:13pt;
			padding:10pt 10pt 8pt;
		}
		
		input[type=submit]:disabled {
			background-color:lightblue;
			opacity:0.6;
		}
		
		ul.ErrorList {
			display:none;
			color:red;
			border:2px solid red;
			background-color:orange;
			padding:10pt 20pt 10pt 60pt;
			margin:20pt 0;
		}
		
		ul.ErrorList li {
			padding:10pt;
		}
	-->
	</style>
</head>
<body>
	<div class="Wrapper">
		<h1>Some Fucking Form Thing</h1>
		<hr />
		<form>
			<ul id="output" class="ErrorList">
				<li>Here is an error</li>
				<li>Here is an error</li>
			</ul>
			
			<fieldset>
				<label>First Name</label><input id="first_name_field" name="First Name" type="text" />
			</fieldset>
			
			<fieldset>
				<label>Last Name</label><input id="last_name_field" name="Last Name" type="text" />
			</fieldset>
			
			<fieldset>
				<label>Email</label><input id="email_field" name="Email" type="text" />
			</fieldset>
			
			<fieldset>
				<label>Password</label><input id="password_field" name="Password1" type="password" />
			</fieldset>
			
			<fieldset>
				<label>Confirm Password</label><input id="confirm_password_field" name="Password2" type="password" />
			</fieldset>
			
			<fieldset>
				<label>Payment Type</label>
				<select id="payment_type_field" name="Payment">
					<option></option>
					<option>Weekly</option>
					<option>Monthly</option>
					<option>Annual</option>
				</select>
			</fieldset>
			
			<fieldset>
				<input id="submit" type="submit" value="Submit" disabled />
			</fieldset>
		</form>
		
		<hr />
	</div>
	
	<script type="text/javascript">
	<!--
		// Vars
		var first_name = document.getElementById('first_name_field');
		var last_name = document.getElementById('last_name_field');
		var email = document.getElementById('email_field');
		var password1 = document.getElementById('password_field');
		var password2 = document.getElementById('confirm_password_field');
		var payment = document.getElementById('payment_type_field');
		
		var submit = document.getElementById('submit');
		var output = document.getElementById('output');
		//
		var fields_to_check = [];
		var errors = [];
		
		// This function self calls at the bottom
		function __main__() {
			bind_events(first_name, last_name, email, password1, password2, payment);
			submit.onclick = onsubmit;
			payment.onchange = onblur;
		};
		
		function render_errors(errors) {
			// No Errors!
			if (!errors.length) {
				output.style.display = 'none';
				output.innerHTML = '';
				submit.disabled = false;
				return;
			}
			
			// Otherwise...
			var o = '';
			for (var i = 0, l = errors.length; i < l; i++) {
				o += '<li>';
				o += errors[i];
				o += '</li>';
			}
			output.innerHTML = o;
			output.style.display = 'block';
			submit.disabled = true;
		};
		
		
		// Validation
		function hasBlanks(val) {
			val = val.trim();
			return !val;
		};
		
		function hasLessThan2Char(val) {
			return val.trim().length < 3;
		};
		
		function emailAddressValidation(email) {
			return (/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/).test(email);
		};
		
		function passwordConfirmation(val1, val2){
			return val1.length && val2.length && val1 === val2;
		};
		
		function paymentValidation(index){
			return index > 0;
		};
		
		function validate_text_field(element) {
			var errors = [];
			if (hasBlanks(element.value))
				errors.push(element.name + ' cannot be blank.');
			if (hasLessThan2Char(element.value))
				errors.push(element.name + ' must have more than two letters.');
			return errors;
		};
		
		function validate_email(element) {
			var errors = [];
			if (hasBlanks(element.value))
				errors.push(element.name + ' cannot be blank.');
			if (!emailAddressValidation(element.value))
				errors.push('Please provide a valid email address.');
			return errors;
		};
		
		function validate_passwords(element1, element2) {
			if (passwordConfirmation(element1.value, element2.value))
				return [];
			return ["Passwords must match."];
		};
		
		function validate_payment(element) {
			if (paymentValidation(element.selectedIndex))
				return [];
			return ['Please select a type of payment.'];
		};
		
		function validate_field(field) {
			var e;
			switch (field.name) {
				case "Payment":
					e = validate_payment(field);
					break;
				case "Password2":
					e = validate_passwords(password1, password2);
					break;
				case "Email":
					e = validate_email(field);
					break;
				default:
					e = validate_text_field(field);
					break;
			}
			if (e.length)
				field.className = 'BAD';
			else
				field.className = 'OK';
			errors = errors.concat(e);
		};
		
		function validate_form(elements) {
			errors = [];
			elements.forEach(validate_field);
			render_errors(errors);
		};
		//
		
		
		// Event Binding
		// This function doesnt take argument yet when you call it, it takes arguments...	
		function bind_events() {
			for (var i = 0, l = arguments.length; i < l; i++) {
				arguments[i].onfocus = onfocus;
				arguments[i].onblur = onblur;
			}
		};
		//
		
		
		// Event Handling
		function onfocus(e) {
			if (fields_to_check.indexOf(this) < 0)
				fields_to_check.push(this);
			this.className = '';
		};
		
		function onblur(e) {
			validate_form(fields_to_check);
		};
		
		function onsubmit(e) {
			validate_form([first_name, last_name, email, password1, password2, payment]);
		};
		//
		
		
		// START!
		__main__();
	//-->
	</script>
</body>
</html>
